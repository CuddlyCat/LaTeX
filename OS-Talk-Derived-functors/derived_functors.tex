% !TeX root = derived_functors.tex
% !TeX spellcheck = en_GB
\documentclass[fontsize=11pt,fleqn,a4paper]{scrartcl}
\input{_preamble/master_preamble.tex}

\title{Homological algebra for derived functors and categories}

\begin{document}

\maketitle

\section{Some categorial flavour to algebraic notions}

\begin{definition}[Projective and injective objects]
$P\in Ob(\mathsf{A})$ is called \udot{projective} iff for every epimorphism $B\twoheadrightarrow A$ and every morphism $P\to A$ there is a morphism $P\to B$ making the triangle commutative.

Dually $I\in Ob(\mathsf{A})$ is called \udot{injective} iff for every monomorphism $A\hookrightarrow B$ and every morphism $A\to I$ there is a morphism $B\to I$ making the triangle commutative.

\begin{figure}[ht]
\centering
\begin{tabular}{cc}
\begin{tikzpicture}
\node (B) at (0,0) {$B$};
\node (A) at (2,0) {$A$};
\node (null) at (3,0) {$0$};
\node (P) at (2,2) {$P$};

\path[->]
(A) edge (null)
(P) edge (A)
(P) edge[dotted] (B);

\path[->>]
(B) edge (A);
\end{tikzpicture}
&
\begin{tikzpicture}
\node (B) at (0,0) {$B$};
\node (A) at (2,0) {$A$};
\node (null) at (3,0) {$0$};
\node (I) at (2,2) {$I$};

\path[<-]
(A) edge (null)
(P) edge (A)
(I) edge[dotted] (B);

\path[left hook->]
(A) edge (B);
\end{tikzpicture}
\end{tabular}
\end{figure}

The full subcategory of all projectives / injectives is denoted by $Proj(\mathsf{A})$ / $Inj(\mathsf{A})$.

The category $\mathsf{A}$ is said to have \udot{enough projectives} / \udot{injectives} if every $A\in\mathsf{A}$ is a quotient / subobject of some projective / injective object.
\end{definition}

\begin{remark}
In both cases, the morphisms whose existence is required are usually highly non-unique.
\end{remark}

\section{Some homological algebra}

\begin{definition}[Chain complexes]
Let $\mathsf{A}$ be an additive category. A \udot{chain complex} $(A_\ast,\partial)$ is a pair consisting of a graded object $A_\ast\in\mathsf{A}^\IZ$ and a morphism $\partial: A\to A$ of degree $-1$, i.e. $\partial_n : A_n \to A_{n-1}$, such that $\partial\circ\partial=0$.

Dually cochain complex consists of a graded object $A^\ast$ and morphisms $d^n:A^n\to A^{n+1}$ such that $d\circ d=0$.
\end{definition}

\begin{remark}
One can switch between chain and cochain complexes by setting $A_n := A^{-n}$ and vice versa.
\end{remark}

\begin{definition}
The category of chain complexes is denoted $Ch(\mathsf{A})$.

The full subcategory of all chain complexes with $A_n = 0$ for $n\ll 0$ ($n\gg 0$) is denoted $Ch^-(\mathsf{A})$ and $Ch^+(\mathsf{A})$ respectively.
\end{definition}

\begin{lemma}
Let $\mathsf{A}\in\mathsf{Cat}$ be additive.
\begin{enumerate}
\item $Ch(\mathsf{A})$ is an additive category too.
\item If $\mathsf{A}$ is abelian, then $Ch(\mathsf{A})$ is an abelian category too. Kernels and cokernels are computed termwise.
\end{enumerate}
\end{lemma}

\begin{definition}[Homology]
Let $\mathsf{A}$ be an abelian category and $A_\ast\in Ch(\mathsf{A})$ a chain complex. Then its \udot{homology} is defined to be the graded object $H_n(A) := \underbrace{\ker(\partial_n)}_{=:Z_n} / \underbrace{\im(\partial_{n+1})}_{=:B_n}$.

Similarly we define cohomology of a cochain complex.
\end{definition}

\begin{definition}
Two morphisms $f,g: A_\ast\to B_\ast$ between chain complexes are \udot{homotopic} iff there exists $h: A_\ast \to B_{\ast+1}$ such that
\[f-g = \partial^B h + h\partial^A\]
Notation $f\homotopic g$.
\end{definition}

\begin{lemma}
\begin{enumerate}
\item $\homotopic$ is an equivalence relation on $\Hom(A_\ast,B_\ast)$.
\item $\homotopic$ is compatible with addition and composition of morphisms.
\end{enumerate}
\end{lemma}

\begin{definition}[Homotopy category]
Let $\mathsf{A}\in\mathsf{Cat}$ be additive. Then $K(\mathsf{A})$ is the category with $Ob(K(\mathsf{A})) := Ob(Ch(\mathsf{A}))$ and $\Hom_{K(\mathsf{A})}(X,Y) := \Hom_{Ch(\mathsf{A})}(X,Y) / \homotopic$.

Similarly we define $K^\pm(\mathsf{A})$.
\end{definition}

\begin{definition}[Homotopy equivalences \& Quasi-isomorphisms]
Isomorphisms in the homotopy category are called \udot{homotopy equivalences}, denoted $A\homotopic B$.

A chain map $f: A_\ast\to B_\ast$ that induces isomorphisms $H(A_\ast) \to H(B_\ast)$ is called a \udot{quasi-isomorphism}, denoted $A \sim B$.
\end{definition}

\subsection{Double Mapping cylinder and mapping cone}

\begin{definition}[Double mapping cylinder]
Let $A\xleftarrow{f} X \xrightarrow{g} B$ be two chain maps. Then the \udot{double mapping cylinder} $DMC(f,g)$ is defined as:
\[DMC(f,g)_n := A_n \oplus X_{n-1} \oplus B_n \quad\text{and}\quad \partial^{DMC} = \begin{pmatrix} \partial^A & f & \\ & -\partial^X & \\ & g & \partial^B\end{pmatrix}\]
\end{definition}

\begin{definition}[Mapping cone]
$Cone(g) := DMC(0\leftarrow A \xrightarrow{g} B)$.
\end{definition}

\begin{remark}
Conversely one can define $DMC(f,g)$ as the pullback of the two projections $Cone(f) \twoheadrightarrow X[-1] \twoheadleftarrow Cone(g)$.
\end{remark}

\begin{remark}
Observe that $Cone(0\to A) = A$ while $Cone(A\to 0) = A[-1]$.
\end{remark}

\begin{theorem}[Universal mapping properties]
With the notation from the definition the following hold:
\begin{enumerate}
\item Out-going morphisms:
\[\Hom_{Ch(\mathsf{A})}(DMC(f,g),Z) = \set{(\alpha,\xi,\beta) | A\xrightarrow{\alpha}Z, B\xrightarrow{\beta}Z, \alpha\circ f + \beta \circ g \overset{\xi}{\homotopic} 0}\]
In particular
\[\Hom_{Ch(\mathsf{A})}(Cone(f),Z) = \set{(\alpha,\xi) | A\xrightarrow{\alpha}Z, \alpha\circ f \overset{\xi}{\homotopic} 0}\]

\item In-coming morphisms:
\[\Hom_{Ch(\mathsf{A})}(W, DMC(f,g)[+1]) = \set{\begin{psmallmatrix}\alpha\\\xi\\\beta\end{psmallmatrix} | W \xrightarrow{\xi} X, f\circ\xi \overset{\alpha}{\homotopic} 0 \wedge g\circ\xi \overset{\beta}{\homotopic} 0}\]
In particular
\[\Hom_{Ch(\mathsf{A})}(W, Cone(f)[+1]) = \set{\begin{psmallmatrix}\alpha\\\xi\end{psmallmatrix} | W \xrightarrow{\xi} X, f\circ\xi \overset{\alpha}{\homotopic} 0}\]
\end{enumerate}
\end{theorem}
\begin{proof}
Obvious calculations.
\end{proof}

\begin{theorem}[Functoriality]
\begin{enumerate}
\item Diagrams of the form
\[\begin{tikzcd}
A \ar[d,"\alpha"] & \ar[l,"f"'] X \ar[r,"g"] \ar[d,"\chi"] & B \ar[d,"\beta"] \\
A' & \ar[l,"f'"'] X' \ar[r,"g'"] & B'
\end{tikzcd}\]
which commute up to homotopy correspond to morphisms between the double mapping cylinders: If $\alpha f - f'\chi \homotopic[h_A]0$ and $\beta g -\chi g'\homotopic[h_B]0$ then
\[ \begin{psmallmatrix}\alpha& h_A & 0 \\ 0&\chi&0 \\ 0&h_B&\beta \end{psmallmatrix} : DMC(f,g) \to DMC(f',g')\]
is a chain-map and vice-versa.

\item Given a diagram as in a. it extends to a commutative up to homotopy diagram
\[\begin{tikzcd}
X \ar[r,"g"] \ar[d,"\chi"] \ar[rd,Rightarrow,"h" description] & B \ar[r,"i_B"] \ar[d,"\beta"] & Cone(g) \ar[r,"q_{X[-1]}"] \ar[d,dotted] & X[-1] \ar[d,"\chi{[-1]}"] \\
X' \ar[r,"g'"] & B' \ar[r,"i_{B'}"] & Cone(g') \ar[r,"q_{X'[-1]}"] & X'[-1] 
\end{tikzcd}\]
where the arrow between cones is $\begin{psmallmatrix}\chi & 0\\h & \beta\end{psmallmatrix}$. In particular $Cone(f)$ is a homotopy-invariant of $f$.
\end{enumerate}
\end{theorem}

\begin{theorem}[Mapping cylinders and cones vs. homotopy I]
Let $A\xleftarrow{f}X\xrightarrow{g} B$ be two chain-maps.
\begin{enumerate}
\item TFAE:
\begin{enumerate}
\item $f$ factors through $g$ up to homotopy, i.e. $f \homotopic \beta g$ for some $\beta:B\to A$.
\item $0 \to A \to DMC(f,g) \to Cone(g) \to 0$ splits.
\end{enumerate}

\item TFAE:
\begin{enumerate}
\item $f$ is null-homotopic.
\item $f$ factors through $A\hookrightarrow Cone(\id_A)$.
\item $f$ factors through some contractible complex.
\item The short exact sequence $0\to A\hookrightarrow Cone(f)\to X[-1]\to 0$ splits.
\end{enumerate}

%\item For $A=B$, TFAE:
%\begin{enumerate}
%\item $f\homotopic g$.
%\item The diagonal embedding $A \xrightarrow{\begin{psmallmatrix}1\\0\\1 \end{psmallmatrix}}DMC(f,g)$ splits.
%\end{enumerate}
\end{enumerate}
\end{theorem}
\begin{proof}
a. Follows immediately from the universal property for out-going morphisms $DMC(f,g)\to A$, because $\beta g \homotopic[h] f \iff (-\beta,h,1) \in \Hom(DMC(f,g),A)$.

\medbreak
b. The universal property for out-going morphisms immediately proves i.$\iff$ii. and ii$\implies$iii.$\implies$i. is trivially true. i.$\iff$iv. follows from a. with $B=0$. Note that $Cone(X\to 0)=X[-1]$. 

Alternatively: A splitting $X\to Cone(f)[+1]$ is a chain map $s=(\sigma,\id)$ which is equivalent to $f\circ\id_X \homotopic[\sigma] 0$ by the universal property for in-coming morphisms.
\end{proof}

\begin{lemma}[Modifying homotopies to obtain additional equations]\label{homalg:modifying_homotopy_equivalence}
If $A \xtofrom[\beta]{f} B$ are chain maps with $\id_B-f\beta \overset{ \tilde{\delta}}{\homotopic} 0$ and $\id_A-\beta f \overset{-\alpha}{\homotopic} 0$ for some maps $\tilde{\delta}: B_\ast\to B_{\ast+1}$ and $\alpha: A_\ast \to A_{\ast+1}$, then
\begin{enumerate}
\item $\psi:=\begin{pmatrix}\id&0\\\tilde{\delta}f+f\alpha&\id\end{pmatrix}: \begin{array}{c}A_n\\B_{n+1}\end{array} \to \begin{array}{c}A_n\\B_{n+1}\end{array}$ is a chain-map automorphism of $Cone(f)[+1]$.
\item There exist another homotopy $\delta: B_\ast\to B_{\ast+1}$ such that $\id-f\beta \overset{\delta}{\homotopic} 0$ and additionally a map $\gamma: A_\ast \to B_{\ast+2}$ such that $f\alpha + \delta f = \gamma\partial - \partial\gamma$.
\end{enumerate}
\end{lemma}
\begin{proof}
a. $\psi=\partial^C \tilde{H} + \tilde{H}\partial^C$ for $\tilde{H}=\begin{pmatrix}\alpha&\beta\\0&\tilde{\delta}\end{pmatrix}$ and every map of the form $\partial h + h\partial$ is a chain-map, because $\partial\psi = 0+\partial(h \partial) = (\partial h)\partial + 0 = \psi \partial$. It is obviously an automorphism because it is lower triangular with isomorphisms on the diagonal.
%\[\partial^{C} \psi - \psi \partial^{C} = \begin{pmatrix} 0 & 0 \\ \partial\delta f + \partial f\alpha + \delta f\partial + f\alpha\partial & 0 \end{pmatrix}
%= \begin{pmatrix} 0 & 0 \\ (\partial\delta f + \delta f\partial) + (\partial f\alpha + f\alpha\partial) & 0 \end{pmatrix}\]
%This is zero because
%\[\partial\delta f + \delta f \partial = \partial\delta f + \delta \partial f = (\id-f\beta)f\]
%and
%\[\partial f \alpha + f\alpha\partial = f\partial\alpha+f\alpha\partial = f(\beta f-\id) \qedhere\]

b. $H:=\psi^{-1} \tilde{H} = \begin{pmatrix}\alpha&\beta\\\gamma&\delta\end{pmatrix}$ now satisfies $\partial H+H\partial = \id$. Checking the components (2,1) and (2,2) we find the two necessary equations.
\end{proof}

\begin{theorem}[Mapping cylinders and cones vs. homotopy II]
Let $A\xleftarrow{f}X\xrightarrow{g} B$ be two chain-maps.
\begin{enumerate}
\item TFAE:

\begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $A$ is a deformation retract of $DMC(f,g)$.
\item $i_A$ is a homotopy-equivalence.
\item $g$ is a homotopy-equivalence.
\end{enumerate}
\end{minipage} \hfill \begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $B$ is a deformation retract of $DMC(f,g)$.
\item $i_B$ is a homotopy-equivalence.
\item $f$ is a homotopy-equivalence.
\end{enumerate}
\end{minipage}

\item In particular the following are also equivalent:

\begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $Cone(g)$ is contractible.
\item $g$ is a homotopy-equivalence.
\end{enumerate}
\end{minipage} \hfill \begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $Cone(f)$ is contractible.
\item $f$ is a homotopy-equivalence.
\end{enumerate}
\end{minipage}

\end{enumerate}
\end{theorem}
\begin{proof}
a.$\implies$b. is trivially true. For b.$\implies$c. let $\phi=(\phi_A,\phi_X,\phi_B): DMC(f,g)\to A$ be a homotopy inverse so that $\phi_A = \phi\circ i_A \homotopic \id_A$ and $i_A \circ \phi \overset{H}{\homotopic} \id$, say with
\[H=\begin{pmatrix}\alpha&\beta&\gamma\\\delta&\varepsilon&\zeta\\\eta&\theta&\kappa\end{pmatrix} : \begin{array}{c}A_n\\X_{n-1}\\B_n\end{array} \to \begin{array}{c}A_{n+1}\\X_n\\B_{n+1}\end{array}\]
Writing the equation $\partial H + H\partial = \id - i_A \circ \phi$ in components, gives us nine individual equations:
\begin{align*}
1-\phi_A &= \partial\alpha+f\delta + \alpha\partial \tag{1,1} \\
-\phi_X &= \partial\beta+f\varepsilon + \alpha f-\beta\partial+\gamma g \tag{1,2} \\
-\phi_B &= \partial\gamma+f\zeta+\gamma\partial \tag{1,3} \\
%
0 &= -\partial\delta +\delta\partial \tag{2,1} \\
1 &= -\partial\varepsilon + \delta f - \varepsilon\partial + \zeta g \tag{2,2} \\
0 &= -\partial\zeta + \zeta\partial \tag{2,3} \\
%
0 &= g\delta + \partial\eta + \eta\partial \tag{3,1} \\
0 &= g\varepsilon + \partial\theta+\eta f - \theta\partial+\kappa g \tag{3,2} \\
1 &= g\zeta +\partial\kappa + \kappa\partial \tag{3,3}
\end{align*}

The equations (2,1) and (2,3) show that $\delta: A\to X$ and $\zeta: B\to X$ are chain-maps. The equations (3,3) shows $1 \overset{\kappa}{\homotopic} g\zeta$ and (2,2) shows $1-\delta f \overset{-\varepsilon}{\homotopic} \zeta g$ which is almost what we want.

If we look at (1,1) we find that $1-\phi_A \overset{\alpha}{\homotopic} f\delta$ but $\phi_A$ is already homotopic to $\id_A$ by assumption so that $f\delta \homotopic 0$. This in turn proves that $(\delta f)^2 \homotopic 0$ so that $1-\delta f$ is invertible in the homotopy category. Now we are in the situation that $[g][\zeta] = [\id_B]$ and $[\zeta][g]=[1-\delta f]\in Aut_{K(\mathsf{A})}(X)$. In this situation $[g]$ and $[\zeta]$ are automatically inverse to each other which is what we wanted to show.

\medbreak
For the direction c.$\implies$a. we choose a homotopy inverse $\zeta$ of $g$ and two homotopies $1-\zeta g \overset{-\varepsilon}{\homotopic} 0$ and $1-g\zeta \overset{\kappa'}{\homotopic} 0$. This already makes (2,3) and (3,3) true. If we choose $\delta:=0$ we also get (2,1) and (2,2) for free.

Choosing $\eta:=0$ also gives us the truth of (3,1). Then with lemma \ref{homalg:modifying_homotopy_equivalence} we can replace $\kappa'$ by another homotopy $\kappa$ (which also makes (3,3) true) and get a $\theta$ such that (3,2) becomes true.

We define $\phi_A:=1, \alpha:=0$ so that (1,1) becomes true. We define $\phi_B:=-f\zeta, \gamma:=0$ so that (1,3) becomes true and $\phi_X:=-f\varepsilon, \beta:=0$ so that (1,2) becomes true.

Now all nine equations are satisfied so that $\id - i_A\circ\phi \overset{H}{\homotopic} 0$. Also by construction $\phi\circ i_A = 1$ which proves a.
\end{proof}

\begin{lemma}
With the notation from the definition the following diagram commutes up to homotopy:
\[\begin{tikzcd}
X \ar[r,"-g"] \ar[d,"f"] & B \ar[r,"i_B"] \ar[d,"i_B"] & Cone(g) \ar[r,"q_{X[-1]}"] \ar[d,equal] & X[-1] \ar[d,"f"] \\
A \ar[r,"i_A"] & DMC(f,g) \ar[r,"q_{Cg}"] & Cone(g) \ar[r,"f\circ q_{X[-1]}"] & A[-1]
\end{tikzcd}\]
\end{lemma}
\begin{proof}
The middle and right square commute as is, the left hand square commutes up to homotopy because
\[i_A\circ f - i_B\circ (-g) = \begin{pmatrix}f\\0\\g\end{pmatrix} = \begin{pmatrix}
\partial^A & f & \\ & -\partial^X & \\ & g & \partial^B
\end{pmatrix}\begin{pmatrix}0\\\id\\0\end{pmatrix} + \begin{pmatrix}0\\\id\\0\end{pmatrix}\partial^X \qedhere\]
\end{proof}

\begin{theorem}[Mapping cylinders and cones vs. homology]
Let $A\xleftarrow{f} X \xrightarrow{g} B$ be two chain-maps. Then the following hold:
\begin{enumerate}
\item Exact sequences: The inclusion and projection maps in the following sequences are chain-maps:
\begin{enumerate}
\item $0 \to A \xrightarrow{i_A} DMC(f,g) \xrightarrow{q_{X[-1]}\oplus q_B} Cone(g) \to 0$
\item $0 \to B \xrightarrow{i_B} DMC(f,g) \xrightarrow{q_A\oplus q_{X[-1]}}  Cone(f) \to 0$
\item $0 \to A\oplus B \xrightarrow{i_A\oplus i_B} DMC(f,g) \xrightarrow{q_{X[-1]}} X[-1] \to 0$.
\end{enumerate}
The connecting morphisms in the long exact homology sequences are
\begin{enumerate}
\item $H_{n+1}(Cone(g)) \xrightarrow{f \circ q_X} H_n(A)$
\item $H_{n+1}(Cone(f)) \xrightarrow{g \circ q_X} H_n(B)$
\item $H_{n+1}(X[-1]) = H_n(X) \xrightarrow{f\oplus g} H_n(A)\oplus H_n(B) = H_n(A\oplus B)$
\end{enumerate}
respectively.
\item TFAE:

\begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $i_A$ is a quasi-isomorphism.
\item $Cone(g)$ is acyclic.
\item $g$ is a quasi-isomorphism.
\end{enumerate}
\end{minipage} \hfill \begin{minipage}{0.49\linewidth}
\begin{enumerate}
\item $i_B$ is a quasi-isomorphism.
\item $Cone(f)$ is acyclic.
\item $f$ is a quasi-isomorphism.
\end{enumerate}
\end{minipage}

\item TFAE:
\begin{enumerate}
\item $H_\ast(f)=0$
\item $i_\ast: H_\ast(A) \to H_\ast(Cone(f))$ is mono.
\item $0\to H_\ast(A) \xrightarrow{i_\ast} H_\ast(Cone(f)) \xrightarrow{q_\ast} H_{\ast-1}(X)\to 0$ is exact.
\item $q_\ast: H_\ast(Cone(f)) \to H_{\ast-1}(X)$ is epi.
\end{enumerate}
\end{enumerate}
\end{theorem}
\begin{proof}
a. is mostly a consequence of the definition and the explicit construction of the connecting homomorphism.

b. follows from a. by looking at the long exact homology sequences induced by those short exact sequences. By the above lemma, we get a commutative diagram of two of those sequences:
\[\begin{tikzcd}
\cdots \ar[r] & H_n(X) \ar[r,"-g"] \ar[d,"f"] & H_n(B) \ar[r,"i_B"] \ar[d,"i_B"] & H_n(Cone(g)) \ar[r,"q_{X[-1]}"] \ar[d,equal] & H_n(X[-1]) \ar[d,"f"] \ar[r] & \cdots\\
\cdots \ar[r] & H_n(A) \ar[r,"i_A"] & H_n(DMC(f,g)) \ar[r,"q_{Cg}"] & H_n(Cone(g)) \ar[r,"f\circ q_{X[-1]}"] & H_n(A[-1]) \ar[r] & \cdots
\end{tikzcd}\]
These two long exact sequences each prove one equivalence: $H_\ast(g)$ iso $\iff H_\ast(Cone(g)) = 0$ and $H_\ast(i_A)$ iso $\iff H_\ast(Cone(g)) = 0$.
\end{proof}

\subsection{Replacing objects by projective / injective resolutions}

\begin{lemma}
Chain maps between projectives / acyclic complexes are unique up to homotopy:
\begin{multicols}{2}
\begin{enumerate}
\item Homology: If $C_\ast\in Ch^-(\mathsf{A})$ is acyclic and $P_\ast\in Ch^-(Proj(\mathsf{A}))$ all morphisms $P_\ast\to C_\ast$ are null-homotopic.
\item Cohomology: If $C^\ast\in Ch^+(\mathsf{A})$ is acyclic and $I^\ast\in Ch^+(Inj(\mathsf{A}))$ all morphisms $C^\ast \to I^\ast$ are null-homotopic.
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
Let $\alpha: P_\ast\to C_\ast$ be a chain map. Inductively we construct a homotopy $h:P_\ast\to C_\ast[1]$ between $\alpha$ and the zero map.

\begin{tikzcd}[row sep=large, column sep=large]
\cdots \arrow[r] &
P_2 \ar[r] \ar[d, "\alpha_2" description] \ar[dl, dotted, "h_2" description] &
P_1 \ar[r] \ar[d, "\alpha_1" description] \ar[dl, dotted, "h_1" description] &
P_0 \ar[r] \ar[d, "\alpha_0" description] \ar[dl, dotted, "h_0" description] & 0 \\
\cdots \ar[r] & C_2 \ar[r] & C_1 \ar[r] & C_0 \ar[r] & 0
\end{tikzcd}

We begin with setting $h_n:=0$ for all $n<0$. First step is to construct $h_0$. Since $C$ is exact, $C_1\to C_0$ is epi so that $\alpha_0$ lifts to some $h_0: P_0 \to C_1$ by projectivity, so that $\partial_1 h_0 + \partial 0 = \alpha_0$ is satisfied.

If $h_0,\ldots,h_{n-1}$ are already known and a partial homotopy, then
\begin{align*}
\partial_n\alpha_n &= \alpha_{n-1}\partial_n \\
&=(\partial_n h_{n-1} + h_{n-2} \partial_{n-1})\partial_n \\
&=\partial_n h_{n-1} \partial_n
\end{align*}
So that $\partial(\alpha_n - h_{n-1}\partial_n)=0$. Therefore $\alpha_n-h_{n-1}\partial_n$ maps into $Z_n(C)$ which equals $B_n(C)=\im(\partial_{n+1})$ by exactness. By projectivity, we can find $h_n$ such that
\[\alpha_n - h_{n-1}\partial_n = \partial_{n+1} h_n\]
is satisfied which proves the lemma.
\end{proof}

\begin{corollary}[Fundamental lemma of homological algebra]
\enquote{Objects can be replaced by their projective or injective resolutions}
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Assume that $\mathsf{A}$ has enough projectives and that a projective resolution has been fixed for every object.

Any $f:A\to B$ extends to a chain map between the augmented complexes
\[\begin{tikzcd}
P_\ast(A) \ar[r] \ar[d, "\phi" description] & A \ar[r] \ar[d, "f" description] & 0\\
P_\ast(B) \ar[r] & B \ar[r] & 0
\end{tikzcd}\]
$\phi$ is unique up to homotopy.

In particular: $\mathsf{A} \xrightarrow{P_\ast} K^-(Proj(\mathsf{A}))$ is a well-defined functor with $H_0\circ P_\ast \isomorphic \id_\mathsf{A}$.

\item Cohomology: Assume that $\mathsf{A}$ has enough injectives and that a injective resolution has been fixed for every object.

Any $f:A\to B$ extends to a chain map between the augmented complexes
\[\begin{tikzcd}
0 \ar[r] & A \ar[r] \ar[d, "f" description] & I^\ast(A) \ar[d, "\phi" description] \\
0 \ar[r] & B \ar[r] & I^\ast(B) 
\end{tikzcd}\]
$\phi$ is unique up to homotopy.

In particular: $\mathsf{A} \xrightarrow{I^\ast} K^+(Inj(\mathsf{A}))$ is a well-defined functor with $H_0\circ I^\ast \isomorphic \id_\mathsf{A}$.
\end{enumerate}
\end{multicols}
As a consequence, projective and injective resolutions are unique up to homotopy equivalence.
\end{corollary}
\begin{proof}
Uniqueness up to homotopy follows from the lemma. We only have to show existence. Again, we work inductively:
\[\begin{tikzcd}[row sep=large]
\cdots \ar[r] &
P_2(A) \ar[r] \ar[d, dotted, "\phi_2" description] &
P_1(A) \ar[r] \ar[d, dotted, "\phi_1" description] &
P_0(A) \ar[r] \ar[d, dotted, "\phi_0" description] &
A \ar[r] \ar[d, "f" description] & 0\\
\cdots \ar[r] & P_2(B) \ar[r] & P_1(B) \ar[r] & P_0(B) \ar[r] &
B \ar[r] & 0
\end{tikzcd}\]

We set $P_{-1}(A):=A$, $\phi_{-1}:=f$,  and $P_{-1}(B):=B$ for notational convenience. If $\phi_{n-1}$ is already constructed, then
\[\begin{tikzcd}
P_n(A) \ar[r, "\partial"] & P_{n-1}(A) \ar[d, "\phi_{n-1}"] & \\
 & P_{n-1}(B) \ar[r, "\partial"] & P_{n-2}(B)
\end{tikzcd} = \begin{tikzcd}
P_n(A) \ar[r, "\partial"] & P_{n-1}(A) \ar[r, "\partial"] & P_{n-2}(A) \ar[d, "\phi_{n-2}"] \\
 & & P_{n-2}(B)
\end{tikzcd} = 0\]
Therefore $\phi_{n-1}\circ\partial_n: P_n(A) \to P_{n-1}(B)$ maps into $Z_{n-1}(P_\ast(B))$ which equals $B_{n-1}(P_\ast(B)) = \im(\partial_n)$ by exactness. By projectivity, we get a lift $\phi_n: P_n(A) \to P_n(B)$.
\end{proof}


\begin{lemma}[Horseshoe lemma]
\enquote{$P_\ast$ and $I^\ast$ are exact}

\begin{multicols}{2}
\begin{enumerate}
\item Homology: Every diagram
\[\begin{tikzcd}[column sep=tiny, row sep=small]
& P_\ast(A) \ar[d] & & P_\ast(C) \ar[d] & \\
0 \ar[r] & A \ar[r]\ar[d] & B \ar[r] & C \ar[r]\ar[d] & 0 \\
& 0 & & 0 &
\end{tikzcd}\]
with exact bottom row and projective resolutions in the columns can be extended with some projective resolution $P_\ast(B)\to B\to 0$ to a diagram
\[\begin{tikzcd}[column sep=tiny, row sep=small]
0 \ar[r] & P_\ast(A) \ar[r] \ar[d] & P_\ast(B) \ar[r]\ar[d] & P_\ast(C) \ar[r]\ar[d] & 0 \\
0 \ar[r] & A \ar[r]\ar[d] & B \ar[r]\ar[d] & C \ar[r]\ar[d] & 0 \\
& 0 & 0 & 0 &
\end{tikzcd}\]
in which all rows are exact.

\item Cohomology: Every diagram
\[\begin{tikzcd}[column sep=tiny, row sep=small]
& 0 \ar[d] & & 0 \ar[d] & \\
0 \ar[r] & A \ar[r] \ar[d] & B \ar[r] & C \ar[r] \ar[d] & 0\\
& I^\ast(A) & & I^\ast(C)&
\end{tikzcd}\]
with exact top row and injective resolutions in the columns can be extended with some injective resolution $0\to B\to I^\ast(B)$ to a diagram
\[\begin{tikzcd}[column sep=tiny, row sep=small]
& 0 \ar[d] & 0\ar[d] & 0\ar[d] & \\
0 \ar[r] & A \ar[r] \ar[d] & B \ar[r]\ar[d] & C \ar[r]\ar[d] & 0\\
0 \ar[r] & I^\ast(A) \ar[r] & I^\ast(B) \ar[r] & I^\ast(C) \ar[r] & 0
\end{tikzcd}\]
in which all rows are exact.
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
Set $A_{-1}:=A$ and $A_n:=P_n(A)$, $C_{-1}:=C$ and $C_n:=P_n(C)$ as well as $B_{-1}:=B$. Then define $P_n(B) := B_n:=A_n\oplus C_n$.

For the vertical maps consider
\[\begin{tikzcd}
0 \ar[r] & A_n \ar[r] \ar[d] & A_n\oplus C_n \ar[r] \ar[d,dotted,"g" description] & C_n \ar[r] \ar[d] \ar[dl,dotted,"h" description] \ar[dll,dotted,"f"' near end] & 0 \\
0 \ar[r] & A_{n-1} \ar[r] \ar[d] & B_{n-1} \ar[r]\ar[d] & C_{n-1} \ar[r]\ar[d] & 0 \\
0 \ar[r] & A_{n-2} \ar[r] & B_{n-2} \ar[r] & C_{n-2} \ar[r] & 0 \\
\end{tikzcd}\]
We define $g:A_n\oplus C_n\to B_{n-1}$ separately on the two components. Define $g:A_n\oplus 0\to B_{n-1}$ to be the composition $A_n\to A_{n-1}\to B_{n-1}$.

The map $g: 0\oplus C_n\to B_{n-1}$ we choose in two steps. First choose $h: C_n \to B_{n-1}$ to make the triangle on the right side commute. Then
\[\begin{tikzcd}[column sep=tiny, row sep=small]
0\oplus C_n \ar[d,"h"] & \\
B_{n-1} \ar[d] & \\
B_{n-2} \ar[r] & C_{n-2} & \\
\end{tikzcd} = \begin{tikzcd}[column sep=tiny, row sep=small]
0\oplus C_n \ar[r,"="] & C_n \ar[d] \\
& C_{n-1} \ar[d] \\
& C_{n-2} \\
\end{tikzcd} = 0\]
d.h. $\partial h(C_n) \subseteq A_{n-2}$ because the $(n-2)$th row is exact and of course $\partial\partial h=0$ so that $\partial h(C_n) \subseteq Z_{n-2}(A_\ast) = B_{n-2}(A_\ast)$ by exactness of $A_\ast$. Using projectivity once again, we can lift $\partial h$ to $f: C_n \to A_{n-1}$ and finally define $g:0\oplus C_n\to B_{n-1}$ as $h-f$. Note that $\overline{g(c_n)} = \partial c_n$ still holds because $\im(f) \subseteq\ker(B_{n-1}\to C_{n-1})$.

\medbreak
This ensures $\partial g = 0$ which proves that the middle column is a(n incomplete) complex. We still have to show exactness. So let $b_{n-1}\in B_{n-1}$ with $\partial b_{n-1}=0$.

Then its image $c_{n-1}=\overline{b_{n-1}}$ also satisfies $\partial c_{n-1} =0$ so that a $c_n$ exists with $c_{n-1} = \partial c_n$ by exactness of $C_\ast$. Then $\overline{b_{n-1}-g(0\oplus c_n)} = c_{n-1} - \partial c_n = 0$ so that $b_{n-1}-g(0\oplus c_n)\in\ker(B_{n-1} \to C_{n-1})$ which is $\im(A_{n-1} \to B_{n-1})$ by exactness of the $(n-1)$th row so that $b_{n-1}-g(0\oplus c_n) = a_{n-1}$. Then $0=0-0=\partial b_{n-1} - \partial g(0\oplus c_n) = \partial a_{n-1}$ so that $a_{n-1} = \partial a_n = g(a_n \oplus 0)$. That shows $b_{n-1} = g(a_n\oplus c_n)$.
\end{proof}

\subsection{Replacing complexes by projective / injective resolutions}

\begin{corollary}[Cartan-Eilenberg-resolution]
\enquote{Complexes have resolutions by double complexes of projectives/injectives}
\begin{multicols}{2}
\begin{enumerate}
\item Homology: For every $K_\ast\in Ch(\mathsf{A})$ exists a commutative double complex $P_{\ast,\ast}\in Ch^2(Proj(\mathsf{A}))$ and maps $P_{n,\ast}\to K_n$ such that 
\begin{enumerate}
\item $P_{n,\ast} \to K_n \to 0$
\item $Z(P_{n,\ast}) \to Z_n(K) \to 0$
\item $B(P_{n,\ast}) \to B_n(K) \to 0$
\item $H(P_{n,\ast}) \to H_n(K) \to 0$
\end{enumerate}
are projective resolutions.
\item Cohomology: For every $K^\ast\in Ch(\mathsf{A})$ exists a commutative double complex $I^{\ast,\ast}\in Ch^2(Inj(\mathsf{A}))$ and maps $K^n\to I^{n,\ast}$ such that \begin{enumerate}
\item $0\to K^n \to I^{n,\ast}$
\item $0\to Z^n(K) \to Z(I^{n,\ast})$
\item $0\to B^n(K) \to B(I^{n,\ast})$
\item $0\to H^n(K) \to H(I^{n,\ast})$
\end{enumerate}
are injective resolutions.
\end{enumerate}
\end{multicols}
\end{corollary}
\begin{proof}
Consider the short exact sequences
\[0\to B_n(K)\to Z_n(K) \to H_n(K)\to 0\]
\[0\to Z_n(K) \to K_n \xrightarrow{\partial} B_{n-1}(K)\to 0\]
and choose projective resolutions $P_{n,\ast}'\to B_n\to 0$ and $P_{n,\ast}''\to H_n\to 0$. Apply the horseshoe lemma to the first short exact sequence obtain a projective resolution $P_{n,\ast}'''\to Z_n\to 0$ fitting in the exact sequence and apply it again to the second short exact sequence obtain $P_{n,\ast} \to K_n \to 0$.

Now let $P_{n,\ast} \to P_{n-1,\ast}$ be the composition $P_{n,\ast} \twoheadrightarrow P_{n,\ast}' \hookrightarrow P_{n-1,\ast}''' \hookrightarrow P_{n-1,\ast}$. Since $P''' \to P \to P'$ are short exact sequences, we obtain a commutative double complex in this way.

By construction $Z(P_{n,\ast}) = P_{n,\ast}'''$, $B(P_{n,\ast}) = P_{n,\ast}'$ and $H(P_{n,\ast}) = P_{n,\ast}''$.
\end{proof}

\begin{lemma}
\enquote{Projective / injective resolutions of complexes exist}

\begin{multicols}{2}
\begin{enumerate}
\item Homology: For any bounded above complex $K_\ast\in Ch^-(\mathsf{A})$ there is a $P_\ast \in Ch^-(Proj(\mathsf{A}))$ and a quasi-isomorphism $P_\ast \to K_\ast$.

$P_\ast$ can be chosen such that the quasi-isomorphism is termwise epi: $P_n\twoheadrightarrow K_n$.

\item Cohomology: For any bounded below complex $K^\ast\in Ch^+(\mathsf{A})$ there is a $I^\ast \in Ch^+(Inj(\mathsf{A}))$ and a quasi-isomorphism $K^\ast \to I^\ast$.

$I_\ast$ can be chosen such that the quasi-isomorphism is termwise mono: $K_n \hookrightarrow I_n$.
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
Take the total complex of $P_{\ast,\ast}$ in the previous statement.
\end{proof}

\begin{lemma}\label{homalg:splitting_quasi_isos}
\begin{minipage}{0.49\linewidth}
Homology: Let $M_\ast\in Ch^-(\mathsf{A}), P_\ast\in Ch^-(Proj(\mathsf{A}))$ and $M_\ast \xtwoheadrightarrow{f} P_\ast$ termwise epi. If $f$ is a quasi-isomorphism, then it splits.
\end{minipage} \hfill \begin{minipage}{0.49\linewidth}
Cohomology: Let $M^\ast\in Ch^+(\mathsf{A}), I^\ast\in Ch^+(Inj(\mathsf{A}))$ and $I^\ast \xhookrightarrow{f} M^\ast$ termwise mono. If $f$ is a quasi-isomorphism, then it splits.
\end{minipage}
\end{lemma}
\begin{proof}
Let $K:=\ker(f)\leq M$. We assume that sections $s_0,\ldots,s_{n-1}$ have already been chosen such that $\partial s_i = s_{i-1}\partial$ already holds. Then we can write $M_i = P_i\oplus K_i$ and assume $s_i$ is the inclusion and $\partial_i^M=\begin{pmatrix}\partial_i^P & \\ & \partial_i^K\end{pmatrix}$ for all $i<n$.

Since $P_n$ is projective and $M_n\to P_n$ is epi, we assume from the start $M_n=P_n\oplus K_n$, i.e. we first chose an arbitrary section. We now have to find a section $s_n=\begin{pmatrix}\id\\\sigma\end{pmatrix} : P_n \to \begin{array}{c}P_n\\K_n\end{array}$ which also commutes with $\partial$.

We write $\partial^M: P_\ast\oplus K_\ast \to P_{\ast-1}\oplus K_{\ast-1}$ as $\begin{pmatrix}\partial^P&\\\delta&\partial^K\end{pmatrix}$. Note that
\[0=\partial_{n-1}^M\partial_n^M = \begin{pmatrix}\partial_{n-1}^P & \\ & \partial_{n-1}^K\end{pmatrix} \begin{pmatrix} \partial_n^P & \\ \delta & \partial_n^K \end{pmatrix} = \begin{pmatrix}
\partial{n-1}^P \partial_n^P & \\\partial_{n-1}^K\delta_n&\partial_{n-1}^K \partial_n^K\end{pmatrix}\]
so that $\partial_{n-1}^K\delta = 0$, i.e. $P_n \xrightarrow{\delta_n} Z_{n-1}(K)$. Now we use that $f$ is a quasi-isomorphism so that $K=\ker(f)$ is acylic. Therefore $Z_{n-1}(K) = B_{n-1}(K)=\im(\partial_{n}^K)$.

By projectivity there exists $\sigma:P_n\to K_n$ with $\delta = \partial_n^K (-\sigma)$. With this definition $s_n$ commutes with $\partial$:
\[\partial_n^M s_n = \begin{pmatrix}\partial_n^P & \\ \delta & \partial_n^K\end{pmatrix}\begin{pmatrix}\id\\\sigma\end{pmatrix}= \begin{pmatrix}\partial_n^P & \\ -\partial_n^K \sigma & \partial_n^K\end{pmatrix}\begin{pmatrix}\id\\\sigma\end{pmatrix} = \begin{pmatrix}\partial_n^P \\ 0 \end{pmatrix} = \underbrace{\begin{pmatrix}\id \\ 0 \end{pmatrix}}_{=s_{n-1}}\partial_n^P \qedhere\]
\end{proof}

\begin{lemma}[\enquote{Fundamental lemma of homological algebra upgraded to complexes}]
.
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Let $A_\ast,Q_\ast \in Ch^-(\mathsf{A})$ be quasi-isomorphic, say $Q_\ast \xrightarrow[\sim]{\alpha} A_\ast$. Furthermore let $P_\ast\in Ch^-(Proj(\mathsf{A}))$ and $P_\ast \xrightarrow{\beta} A_\ast$ be arbitrary.

\begin{enumerate}
\item If $\alpha$ is termwise epi, then there exists a chain-map $P_\ast \xrightarrow{\gamma} Q_\ast$ such that $\alpha\circ\gamma = \beta$.
\item If $\alpha$ is arbitrary, there exists a $\gamma$ such that $\alpha\circ\gamma \homotopic \beta$.
\item Any two chain-maps with $\alpha\circ\gamma_1\homotopic\beta\homotopic\alpha\circ\gamma_2$ are homotopic.
\end{enumerate}

\item Cohomology: Let $A^\ast,Q^\ast \in Ch^+(\mathsf{A})$ be quasi-isomorphic, say $A_\ast \xrightarrow[\sim]{\alpha} Q_\ast$. Furthermore let $I^\ast\in Ch^+(Inj(\mathsf{A}))$ and $A^\ast \xrightarrow{\beta} I^\ast$ be arbitrary.

\begin{enumerate}
\item If $\alpha$ is termwise mono, then there exists a chain-map $Q^\ast \xrightarrow{\gamma} I^\ast $ such that $\gamma\circ\alpha = \beta$.
\item If $\alpha$ is arbitrary, there exists a $\gamma$ such that $\gamma\circ\alpha\homotopic \beta$.
\item Any two chain-maps with $\gamma_1\circ\alpha\homotopic\beta\homotopic\gamma_2\circ\alpha$ are homotopic.
\end{enumerate}
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{remark}
If $A$ is concentrated in a single degree, then $Q_\ast \to A_0\to 0$ is just an acyclic complex and the statement reduces to the fundamental lemma of homological algebra. In this sense this statement is a generalisation of the fundamental lemma from $\mathsf{A}$ to $D^\pm(\mathsf{A})$.
\end{remark}

\begin{proof}[Homological version, seems harder??]
Assume that a partial chain map $\gamma_0,\ldots,\gamma_{n-1}$ is already constructed. We want to construct the missing arrow in the commutative diagram
\[\begin{tikzcd}
P_n \ar[rr] \ar[d,dotted] \ar[ddd,bend right] && P_{n-1} \ar[d] \ar[ddd,bend left] \\
Q_n \ar[dd,->>] \ar[rr] \ar[rd] && Q_{n-1} \ar[dd,->>] \\
& F \ar[ru] \ar[ld] & \\
A_n \ar[rr] && A_{n-1}
\end{tikzcd}\]
We set
\[F:=A_n \times_{A_{n-1}} Z(Q_{n-1}) = \Set{(a_n,q_{n-1})\in A_n\times Q_{n-1} | \partial q_{n-1} = 0 \wedge \partial a_n = \alpha(q_{n-1})}\]
First we prove that the map $Q \xrightarrow{(\alpha,\partial)} F$ is epi. Let $(a_n,q_{n-1})\in F$ be arbitrary.

Then $q_{n-1} \in Z_{n-1}(Q)$ so that the homology class is well-defined. Then $\alpha_\ast [q_{n-1}]_{H_{n-1}(Q)} = [\alpha(q_{n-1})]_{H_{n-1}(A)} = [\partial a_n] = 0$. Since $\alpha$ is injective on homology, this means $[q_{n-1}] = 0$, i.e. $q_{n-1} = \partial q_n'$ for some $q_n'\in Q_n$.

Then $\partial a_n = \alpha(q_{n-1}) = \alpha\partial(q_n') = \partial \alpha(q_n')$ so that $a_n-\alpha(q_n')\in Z_n(A)$. Since $\alpha$ is surjective on homology, there is a $z_n\in Z_n(Q)$ such that $[\alpha(z_n)] = [a_n-\alpha(q_n')]$, i.e. there exists a $a_{n+1}$ such that $\alpha(z_n) = a_n - \alpha(q_n') + \partial a_{n+1}$.

Now choose an preimage $q_{n+1}\in Q_{n+1}$ of $a_{n+1}$ and set $q_n := z_n+q_n' - \partial q_{n+1}$. This is the preimage of $(a_n,q_{n-1})$:

\[\alpha(q_n) = \underbrace{\alpha(z_n)+\alpha(q_n')}_{=a_n+b_n} - \alpha(\partial q_{n+1}) = a_n + b_n - \partial\alpha(q_{n+1}) = a_n\]
\[\partial(q_n) = \underbrace{\partial z_n}_{=0} + \underbrace{\partial q_n'}_{=q_{n-1}} + 0\]

\medbreak
Since we now know that $Q_n \to F$ is epi, we can lift the morphism $(\beta_n,\gamma_{n-1}\partial): P_n \to F$ to a morphism $\gamma_n: P_n\to Q_n$. By construction it makes the diagram commute so that it is a partial chain map.

\medbreak
b. If $\alpha$ is not term-wise epi, we can replace $Q$ by the double mapping \emph{co}cone $D:=DMC^{op}(Q\xrightarrow{\alpha}A\xleftarrow{\beta}P)$, i.e. the double mapping cone in the opposite category. It comes with two epimorphisms $P \xtwoheadleftarrow{q_P} D \xtwoheadrightarrow{p_Q} Q$ such that
\[\begin{tikzcd}[column sep=large]
D \ar[d,->>,"q_Q"] \ar[r,->>,"q_P"] & P \ar[d,"\beta"] \\
Q \ar[r,"\alpha","\sim"'] & A
\end{tikzcd}\]
anticommutes up to homotopy. Furthermore $q_P$ is a quasi-isomorphism because $\alpha$ is one. Since $q_P$ is epi and a quasi-isomorphism, there is a splitting of $P \twoheadleftarrow D$ by lemma \ref{homalg:splitting_quasi_isos} which corresponds to $\beta$ factoring through $\alpha$.

\medbreak
c. For uniqueness observe that $\alpha\circ(\gamma_1-\gamma_2) \homotopic 0$ so that there is a chain-map
\[\widehat{\gamma}: P_\ast[-1] \xrightarrow{(h,\gamma_1-\gamma_2)} Cone(\alpha), p \mapsto (h(p), (\gamma_1-\gamma_2)(p))\]
by the universal mapping property of cones. Since $\alpha$ is a quasi-isomorphism, $Cone(\alpha)$ is acyclic so that any such map is null homotopic. In particular $\gamma_1-\gamma_2 = quotient\circ \widehat{\gamma} \homotopic 0$.
\end{proof}

\section{The derived category}


\section{Derived functors I: \texorpdfstring{$\delta$}{δ}-functors}

\begin{remark}[The Problem]
Given abelian categories $\mathsf{A}$ and $\mathsf{B}$ and a right-exact functor $F: \mathsf{A} \to \mathsf{B}$, and exact sequence
\[0\to A \to B \to C \to 0\]
gives a exact sequence
\[F(A) \to F(B) \to F(C) \to 0\]
We want to find functors $L_nF$ and natural transformations $\delta_n$ (natural w.r.t. the short exact sequence) such that this sequence extends to a long exact sequence
\[\cdots \to L_2F(C) \xrightarrow{\delta_2} L_1F(A) \to L_1F(B) \to L_1F(C) \xrightarrow{\delta_1} \underbrace{F(A)}_{=L_0F(A)} \to \underbrace{F(B)}_{L_0F(B)} \to \underbrace{F(C)}_{=0} \to 0\]
And similarly for left-exact functors.

Of course, we want the universal solution to this problem.
\end{remark}

\begin{definition}[$\delta$-functors]
A family $F=(F_n,\delta_n)_{n\in\IN}$ of functors $\mathsf{A} \xrightarrow{F_n} \mathsf{B}$ and natural transformations $F_n(C) \xrightarrow{\delta_n} F_{n-1}(A)$ for every short exact sequence $0\to A\to B\to C\to 0$ that transforms such short exact sequences into long exact sequences as above is called a \udot{(homological) $\delta$-functor}.

A morphism $F\xrightarrow{t}G$ of $\delta$-functors is a family $(t_n)$ of natural transformations $F_n \xrightarrow{t_n} G_n$ which induces a morphism between the long exact sequences, i.e. $t_{n-1}\delta_n^F = \delta_n^G t_n$.

\medbreak
Cohomological $\delta$-Functors $(F^n,d^n)$ are analogously defined.
\end{definition}

\begin{definition}[Universal $\delta$-functors]
A homological $\delta$-functor $(F_n,\delta_n)$ is called the \udot{universal $\delta$-functor} if for every $(G_n,\delta_n)$ and every $G_0 \xrightarrow{t_0} F_0$ there exists a unique morphism $G \xrightarrow{t} F$ of $\delta$-functors extending $t_0$.

Similarly a cohomological $\delta$-functor is one where every morphism $F^0 \xrightarrow{t^0} G^0$ extends uniquely to a morphism $F \xrightarrow{t} G$.
\end{definition}

\begin{definition}[Derived functors]
Let $F: \mathsf{A} \to \mathsf{B}$ be right-exact. A $\delta$-functor $(L_nF,\delta_n)$ together with an isomorphism $L_0 F \xrightarrow{\tau} F$ is called the \udot{left derived functor of $F$} if $(LF,\tau)$ is a final object in the category of all $\delta$-functor-with-isomorphisms.

It is in other words a representation of the functor $\set{\delta\text{-functors}} \to \mathsf{Set}, (G_n,\delta_n)\mapsto \operatorname{Nat}(G_0,F)$ such that the universal element $\tau\in Nat(F_0,F)$ is an iso.

\medbreak
Similarly \udot{right derived functor} $RF$ of a left exact $F$ is defined as an initial object in the appropriate category of $\delta$-functors with isomorphism $F\xrightarrow[\isomorphic]{\tau} R^0 F$, i.e. a representation of the functor $(G^n,d^n) \mapsto \operatorname{Nat}(F,G^0)$ such that the universal element is an isomorphism.
\end{definition}

\begin{lemma}[Recognising universal $\delta$-functors]
Let $(F_n,\delta_n)$ be a $\delta$-functor.
\begin{multicols}{2}
\begin{enumerate}
\item Homology: If $\mathsf{A}$ has enough projectives and $F_n(P) = 0$ for all $n\geq 1$ and all $P\in Proj(\mathsf{A})$, then $F$ is a universal homological $\delta$-functor.
\item Cohomology: If $\mathsf{A}$ has enough injectives and $F^n(I) = 0$ for all $n\geq 1$ and all $I\in Inj(\mathsf{A})$, then $F$ is a universal cohomological $\delta$-functor.
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
Let $(\tilde{F}_n,\tilde{\delta}_n)$ be another $\delta$-functor and assume that unique transformations $t_0,\ldots,t_{n-1}$ have already been constructed. Fix $A\in\mathsf{A}$ and choose a short exact $0\to K\xrightarrow{j} P \xrightarrow{q} A\to 0$ with $P$ projective. Then
\[\begin{tikzcd}
\cdots \ar[r] & \tilde{F}_n(P) \ar[r]\ar[d,dotted]  & \tilde{F}_n(A) \ar[r,"\tilde{\delta_n}"]\ar[d,dotted]  & \tilde{F}_{n-1}(K) \ar[r]\ar[d,"t_{n-1}"]  & \tilde{F}_{n-1}(P)\ar[d,"t_{n-1}"] \ar[r] & \cdots \\
\cdots \ar[r] & \underbrace{F_n(P)}_{=0} \ar[r] & F_n(A) \ar[r,"\delta_n"] & F_{n-1}(K) \ar[r] & F_{n-1}(P) \ar[r] & \cdots 
\end{tikzcd}\]
It follows that $F_n(A) \xrightarrow[\isomorphic]{\delta_n} \ker(F_{n-1}(j))$ and since $t_{n-1}$ is natural, there is a unique $t_n: \tilde{F}_n(A) \to F_n(A)$ that makes the square commute. This $t_n$ does not depend on the choice of $K$ and $P$ by Schanuel's lemma.

Naturality of $t_n$ follows from a simple diagram chase using naturality of $\delta_n$ and $\tilde{\delta_n}$, naturality of $t_{n-1}$ and that $F_n(A) \to F_{n-1}(K)$ is mono.

It remains to show that $t_n$ commutes with the deltas for an arbitrary short exact $0\to A\to B\to C\to 0$. This also follows from a simple diagram chase.
\end{proof}

\begin{theorem}[Derived functors exist]
Let $F:\mathsf{A}\to\mathsf{B}$ be additive.
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Let $F$ be right-exact.
\begin{enumerate}
\item If $\mathsf{A}$ has enough projectives, then $F$ has a left derived functor.
\item $L_i F(P) = 0$ for all projectives $P$ and all $i \geq 1$.
\item Deriving is a functor $L_i: \mathsf{Fun}_\text{r.e.}(\mathsf{A},\mathsf{B}) \to \mathsf{Fun}_\text{add}(\mathsf{A},\mathsf{B})$.
\end{enumerate}
\item Cohomology: Let $F$ be left-exact.
\begin{enumerate}
\item If $\mathsf{A}$ has enough injectives, then $F$ has a right derived functor.
\item $R^i F(I) = 0$ for all injectives $I$ and all $i \geq 1$.
\item Deriving is a functor $R^i: \mathsf{Fun}_\text{l.e.}(\mathsf{A},\mathsf{B}) \to \mathsf{Fun}_\text{add}(\mathsf{A},\mathsf{B})$.
\end{enumerate}
\end{enumerate}
\end{multicols}
\end{theorem}
\begin{proof}
Existence: Define
\[L_nF := \mathsf{A}\xrightarrow{P_\ast} K^-(\mathsf{A}) \xrightarrow{K^-(F)} K^-(\mathsf{B}) \xrightarrow{H_n} \mathsf{B}\]
Note that this does not depend on the choice of the projective resolutions $P_\ast$ because all choices are homotopy equivalent and homology forgets homotopy. Note that $L_i F(P) = 0$ for $P$ projective and $i>0$ because $0\to P\xrightarrow{\id} P \to 0$ is a projective resolution of $P$.

\medbreak
Horseshoe lemma implies that every short exact sequence
\[0\to A\to B\to C\to 0\]
lifts to exact sequence up to homotopy $0\to P_\ast(A) \to P_\ast(B) \to P_\ast(C)\to 0$ which is termwise split. Thus $0\to F(P_\ast(A)) \to F(P_\ast(B)) \to F(P_\ast(C)) \to 0$ is also exact. That implies a long exact sequence in homology with a natural connecting morphisms from the snake lemma. Therefore $LF=(L_i F,\delta_i)$ is a $\delta$-functor. It extends $P$ because $P_\ast(A)\to A\to 0$ is a projective resolution and $F$ is right exact so that $FP_1 \to FP_0 \to FA \to 0$ is still exact so that $H_0(F(P_\ast(A))) \isomorphic A$ naturally.

\medbreak
We still have to show universality. Let $(\tilde{F}_n,\tilde{\delta}_n)$ be another $\delta$-functor and $t_0: \tilde{F} \to F_0$. The above lemma shows that there is a unique morphism of $\delta$-functors $t: \tilde{F}\to F$ which extends $t_0$.

\medbreak
The lemma also proves that every natural transformation $F\to G$ between right exact functors extends to $LF \to LG$ since $L_iG(P) = 0$.
\end{proof}

\subsection{Computing derived functors via acyclic resolutions}

\begin{definition}[$F$-acyclic objects]
An object $Q\in\mathsf{A}$ is called \udot{$F$-acyclic} if
\begin{enumerate}
\item Homology: $L_n F(Q) = 0$
\item Cohomology: $R^n F(Q) = 0$
\end{enumerate}
holds for all $n\geq 1$.
\end{definition}

\begin{remark}
$Proj(\mathsf{A}) \subseteq Acyc(F)$ for all right-exact $F$ and $Inj(\mathsf{A})\subseteq Acyc(F)$ for all left exact $F$. For some $F$ (like $\Hom(A,-)$) equality may hold, but depending on $F$, the class of acyclics may be bigger then the class of projectives (or injectives). For example in general $Proj(A\mathsf{-Mod}) \subsetneq Flat(A\mathsf{-Mod}) \subseteq Acyc(M\otimes-)$.

We want to show that complexes of $F$-acyclic objects are just as good to compute derived functors as projectives / injectives are.
\end{remark}

\begin{theorem}
Let $F:\mathsf{A}\to\mathsf{B}$ be additive.
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Assume $F$ is right-exact and $\mathsf{A}$ has enough projectives. If $Q_\ast \to A\to 0$ is a resolution of $A$ by $F$-acyclic objects, then $L_nF(A) \isomorphic H_n(F(Q_\ast))$.

More precisely: Given any projective resolution $P_\ast \to A \to 0$, the unique-up-to-homotopy chain-map $P_\ast\xrightarrow{\gamma} Q_\ast$ induces an isomorphism 
\[L_nF(A) = H_n(F(P_\ast)) \xrightarrow[\isomorphic]{H_n(F\gamma)} H_n(F(Q_\ast))\]

\item Cohomology: Assume $F$ is left-exact and $\mathsf{A}$ has enough injectives. If $0\to A\to Q^\ast$ is a resolution of $A$ by $F$-acyclic objects, then $R^nF(A) \isomorphic H^n(F(Q^\ast))$.

More precisely: Given any injective resolution $0\to A\to I^\ast$, the unique-up-to-homotopy chain-map $Q^\ast\xrightarrow{\gamma} I^\ast$ induces an isomorphism
\[H^n(F(Q^\ast)) \xrightarrow[\isomorphic]{H^n(F\gamma)} H^n(F(I^\ast))=R^nF(A)\]
\end{enumerate}
\end{multicols}
\end{theorem}

The proof needs to small bit of work.

\begin{lemma}
The class of $F$-acyclics has the following properties:
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Assume $F$ is right-exact and $\mathsf{A}$ has enough projectives. Then
\begin{enumerate}
\item Every $A\in\mathsf{A}$ is a quotient $Q\twoheadrightarrow A$ for some acyclic $Q$.
\item It is closed under direct sums and direct summands.
\item If in an exact sequence $0\to A\to B\to C\to 0$ both $B$ and $C$ are acyclic, then $A$ is too.
\item If in an exact sequence $0\to A\to B\to C\to 0$ the object $C$ is acyclic, then $0\to FA\to FB\to FC\to 0$ is also exact.
\end{enumerate}
\item Cohomology: Assume $F$ is left-exact and $\mathsf{A}$ has enough injectives. Then
\begin{enumerate}
\item Every $A\in\mathsf{A}$ is a subobject $A \hookrightarrow Q$ for some acyclic $Q$.
\item It is closed under direct sums and direct summands.
\item If in an exact sequence $0\to A\to B\to C\to 0$ both $A$ and $B$ are acyclic, then $C$ is too.
\item If in an exact sequence $0\to A\to B\to C\to 0$ the object $A$ is acyclic, then $0\to FA\to FB\to FC\to 0$ is also exact.
\end{enumerate}
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
i. Projectives are always acyclic.

ii. follows because $L_n F$ is additive.

iii. and iv. follow from the long exact sequence.
\end{proof}

\begin{lemma}
Let $F:\mathsf{A}\to\mathsf{B}$ be additive.
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Let $F$ be right exact and $Q_\ast\in Ch^-(Ac(F))$ be a complex of $F$-acyclic objects.
\item Cohomology: Let $F$ be left exact and $Q^\ast\in Ch^+(Ac(F))$ be a complex of $F$-acyclic objects.
\end{enumerate}
\end{multicols}
If $Q$ is exact, then $FQ$ is also exact.
\end{lemma}
\begin{proof}
Let $K_n$ be the kernels / images of the boundary maps so that we get a diagram
\[\begin{tikzcd}
&& K_2 \ar[rd,hook] && && K_0 \ar[rd,equal] && \\
\cdots \ar[r] & Q_3 \ar[ru,->>] \ar[rr] && Q_2 \ar[dr,->>] \ar[rr] && Q_1 \ar[rr,->>] \ar[ru,->>]  && Q_0 \ar[r] & 0 \\
K_3 \ar[ru,hook] && && K_1 \ar[ru,hook] && &&
\end{tikzcd}\]
where the diagonals are short exact sequences. First observation: By induction all $K_n$ are $F$-acyclic, because the $Q_n$ are.

The transformed sequence
\[\begin{tikzcd}
&& FK_2 \ar[rd] && && FK_0 \ar[rd,equal] && \\
\cdots \ar[r] & FQ_3 \ar[ru,->>] \ar[rr] && FQ_2 \ar[dr,->>] \ar[rr] && FQ_1 \ar[rr,->>] \ar[ru,->>] && FQ_0 \ar[r] & 0 \\
FK_3 \ar[ru] && && FK_1 \ar[ru] && &&
\end{tikzcd}\]
is exact iff the diagonals are exact again, i.e. if $FK_n \to FQ_n$ is mono. This follows from exactness of $K_n \hookrightarrow Q_n \twoheadrightarrow K_{n-1}$ and $L_1F(K_{n-1})=0$.
\end{proof}

\begin{corollary}
\enquote{$F$ maps quasi-isomorphisms between complexes of acyclic objects to quasi-isomorphisms}
\begin{multicols}{2}
\begin{enumerate}
\item Homology: Let $F$ be right exact and $Q_\ast,\widetilde{Q}_\ast\in Ch^-(Acyc(F))$ be complexes of $F$-acyclic objects.
\item Cohomology: Let $F$ be left exact and $Q^\ast,\widetilde{Q}^\ast\in Ch^+(Acyc(F))$ be complexes of $F$-acyclic objects.
\end{enumerate}
\end{multicols}
If $Q \xrightarrow[\sim]{\alpha} \tilde{Q}$ is a quasi-isomorphism, then $FQ \xrightarrow[\sim]{F\alpha} F\tilde{Q}$ is a quasi-isomorphism too.
\end{corollary}
\begin{proof}
$\alpha$ being a quasi-isomorphism implies that $Cone(\alpha)$ is exact. This is also a complex of $F$-acyclic objects. Hence $F(Cone(\alpha)) = Cone(F\alpha)$ is exact by the lemma. Therefore $F\alpha$ is a quasi-isomorphism.
\end{proof}

\begin{proof}[Proof of the main theorem]
Let $P_\ast \to A$ be a projective resolution, $Q_\ast \to A$ an acylic resolution and $\gamma: P_\ast\to Q_\ast$ be a chain-map extending $A\xrightarrow{\id} A$ along those resolutions. $\gamma$ is a quasi-isomorphism because both resolutions have homology $H_n = \begin{cases} A & n=0 \\ 0 & \text{otherwise}\end{cases}$. Therefore $F\gamma$ is a quasi-isomorphism.
\end{proof}

\section{Examples}

\begin{example}[Snake lemma]
Taking kernels is a left-exact functor $\mathsf{A}^{\set{\ast\to\ast}} \to \mathsf{Ab}$. Its right derived functor is the cokernel in degree 1 and zero further up.

Dually taking cokernels is right-exact and its left derived functor is the kernel in degree 1 and zero everywhere else.

This is a manifestation of the snake lemma.
\end{example}

\begin{example}[Sheaf (co)homology]
Sheaf cohomology $H^\ast(X,\mathcal{F})$ is the right derived functor of the global section functor $\Gamma: Sh(X) \to \mathsf{Ab}$.
\end{example}

\begin{example}[DeRham cohomology]
$H_\text{dR}^\ast(M)$ is Sheaf cohomology of the sheaf $\underline{\IR}_M$ of locally constant functions $M\to\IR$.

This uses that
\[0 \to \underline{\IR}_M \hookrightarrow \Omega^0(M) \xrightarrow{d} \Omega^1(M) \xrightarrow{d} \cdots \xrightarrow{d} \Omega^n(M) \to 0\]
is a resolution of $\underline{\IR}_M$ by fine sheafs and that fine sheafs are $\Gamma$-acyclic.
\end{example}

\begin{example}[Singular cohomology]
$H_\text{sing}^\ast(X;G)$ is sheaf cohomology of the sheaf $\underline{G}_X\in Sh(X)$ of locally constant $G$-valued functions if $X$ is paracompact.
\end{example}

\begin{example}[Étale cohomology]
Étale cohomology is the Sheaf cohomology for sheafs on the étale site, i.e. the right derived functor of global sections $\Gamma: \mathsf{Sh}_{et}(X) \to \mathsf{Ab}$.
\end{example}

\begin{example}[Ext and Tor]
$\operatorname{Ext}_A^i(M,N)$ is right derived of $\Hom_A(M,-): A\mathsf{-Mod} \to \mathsf{Ab}$ as well as left derived of $\Hom_A(-,N): \mathsf{Mod-}A\to\mathsf{Ab}^{op}$.

$\operatorname{Tor}_i^A(M,N)$ is left derived of both $M\otimes_A -: A\mathsf{-Mod}\to\mathsf{Ab}$ and $ -\otimes_A N:\mathsf{Mod-}A\to\mathsf{Ab}$.

It is also the left derived of $-\otimes-: \mathsf{Mod-}A\times A\mathsf{-Mod}\to \mathsf{Ab}$!
\end{example}

\begin{example}[Group (co)homology]
$H_\ast(G,M)$ is the left derived functor of the functor of coinvariants $(-)_G=k \otimes_{kG} -$, i.e. it is $Tor_\ast^{kG}(k,M)$.

$H_k^\ast(G,-)$ is the right derived functor of the functor of fixed points $(-)^G = \Hom_{kG}(k,-)$, i.e. it is $Ext_{kG}^\ast(k,M)$.
\end{example}

\begin{example}[Hochschild (co)homology]
Let $A^e := A\otimes_k A^{op}$ be the enveloping algebra of the $k$-algebra $A$.

$HH_n(A,M) := Tor_n^{A^e}(A,M)$, i.e. it is the left derived functor of the functors of coinvariant $M/[A,M] = A\otimes_{A^e} M: (A,A)\mathsf{-Bimod} \to \mathsf{Ab}$.

$HH^n(A,M) := Ext_{A^e}^N(A,M)$, i.e. the right derived functor of the functor of invariants $Z(M) := \Hom_{A^e}(A,M): (A,A)\mathsf{-Bimod} \to \mathsf{Ab}$.
\end{example}

\begin{example}[Lie-algebra (co)homology]
$H_n(\mathfrak{g},M) := Tor_n^{U(\mathfrak{g})}(k,M)$, i.e. left derived of taking coinvariants.

$H^n(\mathfrak{g},M) := Ext^n_{U(\mathfrak{g})}(k,M)$, i.e. right derived of taking invariants.
\end{example}

\section{Derived functors II: Total derived functors}

\subsection{Motivation}

\begin{remark}
Instead of looking at homology alone, we should look at chain complexes up to some notion of equivalence, i.e. we should retain more of the information about the boundary morphisms $\partial$ then just their homology groups.

The reason for this lies in things like Whitehead's theorem:

\begin{theorem}[Whitehead's theorem]
Let $X,Y$ be two simply connected CW-complexes. Then $X$ is homotopy equivalent to $Y$ iff there exists a quasi-isomorphism $C_\ast(X) \to C_\ast(Y)$.
\end{theorem}

For this theorem it is not sufficient to just have $H_\ast(X) \isomorphic H_\ast(Y)$. There must be a chain map inducing this isomorphism. In other words there are spaces, even manifolds, with $H_\ast(X)\isomorphic H_\ast(Y)$ and $\pi_1(X) = \pi_1(Y) = 1$ such that $X \not \homotopic Y$. The isomorphism in homology is \enquote{accidental} in a sense, it does not come from a chain-map.

In the sense of Whitehead's theorem the object $C_\ast(X)$ up to quasi-isomorphism is enough to determine homotopy type of simply connected spaces, but $H_\ast(X)$ is not.

Also note that $C_\ast(X)$ is enough to determine the cohomology $H^\ast(X)$ simply be dualising $H^\ast(X) = H(\Hom(C_\ast(X),\IZ))$ while $H_\ast(X)$ alone is not sufficient since $H^\ast(X) \not\isomorphic \Hom(H_\ast(X),\IZ)$ in general.
\end{remark}

\begin{remark}
On the other hand, going from homology to $K(\mathsf{A})$, i.e. to view everything up to homotopy, is not good enough too, because several complexes which we use to compute (co)homologies (say $F$-acyclic-resolutions and projective resolutions) are not homotopy equivalent even though for (co)homological purposes they should be the same, because they are (uniquely / naturally) quasi-isomorphic.

The derived category combines the best of both worlds by retaining the chain complexes and morphisms between them, but formally inverting all quasi-isomorphisms.
\end{remark}

\subsection{The derived category}

\begin{definition}[Derived category]
Let $\mathsf{A}$ be an additive category. Then $D(\mathsf{A})$ is defined as the localisation of $K(\mathsf{A})$ at quasi-isomorphisms, i.e. it is the universal functor $K(\mathsf{A}) \to D(\mathsf{A})$ such that
\begin{enumerate}
\item it turns (homotopy classes consisting of) quasi-isomorphisms into isomorphisms
\item Every other functor $K(\mathsf{A}) \to D$ with this property factors uniquely through $D(\mathsf{A})$.
\end{enumerate}
$D^\pm(\mathsf{A})$ and $D^b(\mathsf{A})$ are defined analogously.
\end{definition}

\begin{theorem}
Morphisms $A\to B$ in $D(\mathsf{A})$ can be described as equivalence classes of roofs
\[\begin{tikzcd}
&X&\\
A \ar[ru,"f" description] && B \ar[lu,"\alpha" description]
\end{tikzcd}\]
with $B\xrightarrow[\sim]{\alpha} X$ a quasi-isomorphism and $A\xrightarrow{f} B$ a morphism in $K(\mathsf{A})$. We denote such a roof by $\alpha^{-1} f$.

Two such roofs $\alpha^{-1} f$,$\beta^{-1} g$ are defined as equivalent if there is a diagram of the form
\[\begin{tikzcd}[sep=large]
&X&\\
A \ar[ru,"f" description] \ar[rd,"g" description] \ar[r] & Z \ar[u] \ar[d] & B \ar[lu,"\alpha","\sim"'] \ar[ld,"\beta","\sim"'] \ar[l,"\sim" description] \\
&Y&
\end{tikzcd}\]
which commutes up to homotopy.

Composition of two roofs $\alpha^{-1}f: A\to B$,$\beta^{-1}g: B\to C$ is defined by the double mapping cylinder:
\[\begin{tikzcd}
&&DMC(\alpha,\beta)&&\\
& X \ar[ru,"i_X" description] && Y \ar[lu,"i_Y" description] &\\
A \ar[ru,"f" description] && B \ar[lu,"\alpha" description] \ar[ru,"g" description] && C  \ar[lu,"\beta" description]
\end{tikzcd}\]
\end{theorem}

\begin{remark}
Note that $Y \xrightarrow{i_Y} DMC(\alpha,\beta)$ is a quasi-isomorphism because $\alpha$ is a quasi-isomorphism.

Also note that $i_X \alpha + i_Y \beta \homotopic 0$ so that $-i_X^{-1} i_Y \equiv \alpha\beta^{-1}$ holds in $D(\mathsf{A})$.

The sum of two parallel roofs $\alpha^{-1}f,\beta^{-1}g: A\to B$ can therefore be realised as $\alpha^{-1}f+\beta^{-1}g \equiv (i_X \alpha)^{-1}(i_X f-i_Y g)$ where $X\xrightarrow{i_X} DMC(\alpha,\beta) \xleftarrow{i_Y} Y$ are the canonical inclusions.

\end{remark}

\begin{remark}
In general $D(\mathsf{A})$ will not be locally small if $\mathsf{A}$ is not a small category.

However: If $A$ has enough projectives / injectives or is small itself, then  $D^-(\mathsf{A})$ / $D^+(\mathsf{A})$ is guaranteed to be locally small.
\end{remark}

\begin{theorem}
Let $A\xrightarrow{f}B$ be a chain-map.
\begin{enumerate}
\item $f$ Iso. in $D(\mathsf{A}) \iff f$ quasi-isomorphism. In other words: Not more than needed gets inverted.
\item TFAE:
\begin{enumerate}
\item $f=0$ in $D(\mathsf{A})$.
\item There exists a quasi-isomorphism $B\xrightarrow{\beta} X$ s.t. $\beta\circ f \homotopic 0$.
\item $0 \to B \xrightarrow{i_B} Cone(f) \xtwoheadrightarrow{q} A[-1] \to 0$ is a split exact sequence in $D(\mathsf{A})$.
\end{enumerate}
\end{enumerate}
\end{theorem}

\begin{lemma}[Resolution functors]
Let $\mathsf{A}$ be a small abelian category.
\begin{multicols}{2}
\begin{enumerate}
\item Assume $\mathsf{A}$ has enough projectives and a projective resolution $P_\ast(A) \xrightarrow[\sim]{} A_\ast$ has been fixed for every complex.

Then $P_\ast: D^-(\mathsf{A}) \to K^-(Proj(\mathsf{A}))$ is a well-defined functor which is a right inverse to the localisation functor.
\item Assume a $\mathsf{A}$ has enough injectives and a injective resolution $A_\ast \xrightarrow[\sim]{} I^\ast(A)$ has been fixed for every complex.

Then $I^\ast: D^+(\mathsf{A}) \to K^+(Inj(\mathsf{A}))$ is a well-defined functor which is a right inverse to the localisation functor.
\end{enumerate}
\end{multicols}
\end{lemma}
\begin{proof}
We have to show $\Hom_{K}(P_\ast(A_\ast) , P_\ast(B_\ast)) = \Hom_{D}(A_\ast,B_\ast)$.

Morphisms $A\xrightarrow[\gamma]{} B$ in $D^-$ are roofs $A \to M \xleftarrow[\sim]{} B$.
\[\begin{tikzcd}[row sep=small]
P_\ast(A) \ar[rr,dotted,"\gamma" description] \ar[dd,"\sim" description] && P_\ast(B) \ar[dd,"\sim" description] \\
& M & \\
A \ar[rr,dashed] \ar[ru] && B \ar[lu,"\sim" description]
\end{tikzcd}\]
Since $P_\ast(A)$ is termwise projective and $P_\ast(B) \xrightarrow[\sim]{}B \xrightarrow[\sim]{} M$ is a quasi-isomorphism, we can complete the triangle of $P_\ast(A) \to M$ and $M\xleftarrow[\sim]{} P_\ast(B)$ with a unique-up-to-homotopy chain-map $\gamma: P_\ast(A) \to P_\ast(B)$ making the diagram commute up to homotopy.
\end{proof}

\subsection{Total derived functors}

\begin{remark}
Given the way we constructed derived functors, we already worked with an object $LF(A)\in D^-(\mathsf{B})$, namely the complex $F(P_\ast(A))$ (which was also quasi-isomorphic to $F(Q_\ast)$ for any resolution of $A$ by $F$-acyclic objects).

Simply by not taking homology at the end, we already have a functor $\mathsf{A} \to D^-(\mathsf{B})$. We will now extend this functor to the much nicer functor $LF: D^-(\mathsf{A}) \to D^-(\mathsf{B})$, called the total derived functor.

Note that $\mathsf{A}$ embeds into $D^-(\mathsf{A})$ by identifying every $A\in\mathsf{A}$ with the complex $A[0] := \cdots \to 0 \to A\to 0\to\cdots$ having $A$ in degree $0$. In this sense this really is an extension of the functor to a larger category.
\end{remark}

\begin{definition}
Let $p_\mathsf{A}^?: K^?(\mathsf{A}) \to D^?(\mathsf{A})$ be the projection functor from the homotopy category onto the derived category. And let $F:\mathsf{A}\to\mathsf{B}$ be additive.

The total derived functor of $F:\mathsf{A}\to\mathsf{B}$ is the \enquote{best approximation} of $K^\pm(F): K^\pm(\mathsf{A}) \to K^\pm(\mathsf{B})$ on the level of derived categories, i.e. it fits into the commutative (up to natural isomorphism) diagram of functors
\[\begin{tikzcd}[sep = large]
K^{\pm}(\mathsf{A}) \ar[r,"K^\pm(F)"] \ar[d,"p_\mathsf{A}^\pm"'] & K^{\pm}(\mathsf{B}) \ar[d,"p_\mathsf{B}^\pm"] \\
D^\pm(\mathsf{A}) \ar[r,dotted,"LF"',"RF"] & D^\pm(\mathsf{B})
\end{tikzcd}\]
\end{definition}

\begin{remark}
In this situation $LF$ / $RF$ is a right / left Kan-extension of $Q_\mathsf{B}\circ K(F)$ along the localisation $p_\mathsf{A}$. Concretely: $LF$ fits into a diagram
\[\begin{tikzcd}[sep = large]
K^-(\mathsf{A}) \ar[rr,"p_\mathsf{B}^\pm\circ K(F)"{name=top_arrow}] \ar[dr,"p_\mathsf{A}^-"] && D^-(\mathsf{B}) \\
 & D^-(\mathsf{A}) \ar[ur,dotted,"LF"{name=LF, description}] \ar[from=top_arrow,Rightarrow,"\isomorphic" description]
\end{tikzcd}\]
together with a natural transformation $LF \circ p_\mathsf{A} \to p_\mathsf{B} \circ K(F)$ (which happens to be an isomorphism in this case) such that for every other functor $D^-(\mathsf{A}) \xrightarrow{G} D^-(\mathsf{B})$ any given natural transformation $G \circ p_\mathsf{A} \xrightarrow{f} p_\mathsf{B} \circ K(F)$ factors uniquely through $LF\circ p_\mathsf{A}$.

\[\begin{tikzcd}[sep = large]
K^-(\mathsf{A}) \ar[rr,"p_\mathsf{B}^-\circ K(F)"{name=top_arrow}] \ar[dr,"p_\mathsf{A}^-"] && D^-(\mathsf{B}) \\
 & D^-(\mathsf{A}) \ar[ur,bend right=90,"G"{name=G, description}]
\arrow[from=top_arrow,to=G, Rightarrow,"f" description]
\end{tikzcd}
=
\begin{tikzcd}[sep = large]
K^-(\mathsf{A}) \ar[rr,"p_\mathsf{B}^-\circ K(F)"{name=top_arrow}] \ar[dr,"p_\mathsf{A}^-"] && D^-(\mathsf{B}) \\
 & D^-(\mathsf{A}) \ar[ur,dotted,"LF"{name=LF, description}] \ar[ur,bend right=90,"G"{name=G,description}] \ar[from=top_arrow,Rightarrow]
\arrow[Rightarrow,dotted, from=LF, to=G,"\exists!"]
\end{tikzcd}\]

Therefore some authors \emph{define} $LF$ of \emph{any} additive functor $F$ as the right Kan extension $Ran_{p_\mathsf{A}^-}( p_\mathsf{B}^- \circ K(F))$ and $RF$ as the left Kan extension $Lan_{p_\mathsf{A}^+}(p_\mathsf{B}^+\circ K(F))$. In this situation however, even if they exist, $LF$ and $RF$ do in general not extend $F$ if $F$ is not right / left exact.
\end{remark}

\begin{theorem}[Total derived functors exist]
Let $F:\mathsf{A}\to\mathsf{B}$ be additive.
\begin{enumerate}
\item Homology: If $F$ is right exact and $\mathsf{A}$ has enough projectives, $LF$ exists.
\item Cohomology: If $F$ is left exact and $\mathsf{A}$ has enough injectives, then $RF$ exists.
\end{enumerate}
\end{theorem}
\begin{proof}
Choose a resolution functor $D^\pm(\mathsf{A}) \to K^\pm(\mathsf{A})$ and compose with $p_\mathsf{B}^\pm\circ K^\pm(F)$.
\end{proof}

\begin{remark}
Note that we do not need projective / injective resolutions, $F$-acyclic resolutions are fine too because we have already proven that $F(P_\ast(A))$ is quasi-isomorphic to $F(Q_\ast)$ if $Q_\ast$ is any resolution by $F$-acyclic objects.
\end{remark}

\end{document}